"use strict"

function createMap() {
	let myMap = new Map();
	myMap.set(0, "Knight of the White Orchid");
	myMap.set(1, "Carnophage");
	myMap.set(2, "Ethersworn Canonist");
	myMap.set(3, "Doomsday");
	myMap.set(4, "White Knight");
	myMap.set(5, "Goblin Sharpshooter");
	myMap.set(6, "Ophiomancer");
	myMap.set(7, "Leonin Arbiter");
	myMap.set(8, "Imperial Recruiter");
	myMap.set(9, "Containment Priest");
	myMap.set(10, "Kor Spiritdancer");
	myMap.set(11, "Savannah Lions");
	myMap.set(12, "Isamaru, Hound of Konda");
	myMap.set(13, "Erebos, God of the Dead");
	myMap.set(14, "Thalia, Guardian of Thraben");
	myMap.set(15, "Kalitas, Traitor of Ghet");
	myMap.set(16, "Doom Blade");
	myMap.set(17 "Sanguine Bond");
	myMap.set(18 "Goblin Chieftain");
	myMap.set(19, "Infernal Tutor");
	myMap.set(20, "Isochron Scepter");
	myMap.set(21, "Whip of Erebos");
	myMap.set(22, "Cabal Ritual");
	myMap.set(23, "Dragonspeaker Shaman");
	myMap.set(24, "Delver of Secrets");
	myMap.set(25, "Graveborn Muse");
	myMap.set(26, "Chief Engineer");
	myMap.set(27, "Dark Ritual");
	myMap.set(28, "Dark Confidant");
	myMap.set(29, "Grizzly Bears");
	myMap.set(30, "Nantuko Shade");
	myMap.set(31, "Drana, Kalastria Bloodchief");
	myMap.set(32, "Night's Whisper");
	myMap.set(33, "Engineered Plague");
	myMap.set(34, "Vampire Nighthawk");
	myMap.set(35, "Phyrexian Obliterator");
	myMap.set(36, "Murderous Cut");
	myMap.set(37, "Skinshifter");
	myMap.set(38, "Rofellos, Llanowar Emissary");
	myMap.set(39, "Mother of Runes");
	myMap.set(40, "Grim Tutor");
	myMap.set(41, "Jaya Ballard, Task Mage");
	myMap.set(42, "Fleshbag Marauder");
	myMap.set(43, "Sylvan Advocate");
	myMap.set(44, "Desecration Demon");
	myMap.set(45, "Blood Artist");
	myMap.set(46, "Death Baron");
	myMap.set(47, "Tarmogoyf");
	myMap.set(48, "Death's Shadow");
	myMap.set(49, "Cemetery Reaper");
	myMap.set(50, "Elvish Visionary");
	myMap.set(51, "Goblin Warchief");
	myMap.set(52, "Bloodline Keeper");
	myMap.set(53, "Kataki, War's Wage");
	myMap.set(54, "Slaughter Pact");
	myMap.set(55, "Demonic Consultation");
	myMap.set(56, "Sinew Sliver");
	myMap.set(57, "All Hallow's Eve");
	myMap.set(58, "Wall of Blossoms");
	myMap.set(59, "Sorin Markov");
	myMap.set(60, "Pentad Prism");
	myMap.set(61, "Scroll Rack");
	myMap.set(62, "Phantasmal Bear");
	myMap.set(63, "Yawgmoth's Will");
	myMap.set(64, "Grinding Station");
	myMap.set(65, "Sudden Spoiling");
	myMap.set(66, "Cursecatcher");
	myMap.set(67, "Ad Nauseam");
	myMap.set(68, "Archfiend of Depravity");
	myMap.set(69 "Triskaidekaphobia");
	myMap.set(70, "Puresteel Paladin");
	myMap.set(71, "Sakura-Tribe Elder");
	myMap.set(72, "Lotus Cobra");
	myMap.set(73, "Read the Bones");
	myMap.set(74, "Liliana, Heretical Healer");
	myMap.set(75, "Suture Priest");
	myMap.set(76, "Korlash, Heir to Blackblade");
	myMap.set(77, "Martyr of Sands");
	myMap.set(78, "Phyrexian Crusader");
	myMap.set(79, "Tree of Perdition");
	myMap.set(80, "Merfolk Looter");
	myMap.set(81, "Victim of Night");
	myMap.set(82, "Feldon of the Third Path");
	myMap.set(83, "Guttersnipe");
	myMap.set(84, "Nyx-Fleece Ram");
	myMap.set(85, "Consuming Vapors");
	myMap.set(86, "The Abyss");
	myMap.set(87, "Soul's Attendant");
	myMap.set(88, "Scavenging Ooze");
	myMap.set(88, "Waste Not");
	myMap.set(90, "Pack Rat");
	myMap.set(91, "Yawgmoth's Bargain");
	myMap.set(92, "Entomb");
	myMap.set(93, "Descent into Madness");
	myMap.set(94, "Simian Spirit Guide");
	myMap.set(95, "Merciless Executioner");
	myMap.set(96, "Murder");
	myMap.set(97, "Precinct Captain");
	myMap.set(98, "Argothian Enchantress");
	myMap.set(99, "Sphere of Resistance");
	myMap.set(100, "Jace, Vryn's Prodigy");
	myMap.set(101, "Kiku, Night's Flower");
	myMap.set(102, "Braids, Cabal Minion");
	myMap.set(103, "Strangleroot Geist");
	myMap.set(104, "Go for the Throat");
	myMap.set(105, "Howling Mine");
	myMap.set(106, "Genesis Chamber");
	myMap.set(107, "Chainer, Dementia Master");
	myMap.set(108, "Stoneforge Mystic");
	myMap.set(109, "Booster Tutor");
	myMap.set(110, "Ambush Viper");
	myMap.set(111, "Dismember");
	myMap.set(112, "Surgical Extraction");
	myMap.set(113, "Ultimate Price");
	myMap.set(114, "Hymn to Tourach");
	myMap.set(115, "Nightscape Familiar");
	myMap.set(116, "Vampiric Tutor");
	myMap.set(117, "Magus of the Moon");
	myMap.set(118, "Toxic Deluge");
	myMap.set(119, "Dwynen's Elite");
	myMap.set(120, "Corpse Dance");
	myMap.set(121, "Lord of Atlantis");
	myMap.set(122, "Terror");
	myMap.set(123, "Diabolic Edict");
	myMap.set(124, "Hypnotic Specter");
	myMap.set(125, "Invisible Stalker");
	myMap.set(126, "Avatar of the Resolute");
	myMap.set(127, "Narcomoeba");
	return myMap;
}

function createInverseMap() {
	let myMap = createMap();
	let inverseMap = Map();
	for (let i = 0; i < 128; i++) {
		let card = myMap.get(i);
		inverseMap.set(card, i);
	}
	return inverseMap;
}

function padInt(i) {
	if (i >= 100) {
		return i.toString();
	}
	else if (i >= 10) {
		let ret = "0";
		ret = ret + i.toString();
		return ret;
	}
	else {
		let ret = "00";
		ret = ret + i.toString();
		return ret;
	}
}

// winners is a mtgBracketWinners object
function createCompression(bracket_winners) {
	let compressed = new Array();
	let inverseMap = createInverseMap();

	for (let i = 0; i < 9; i++) {
		let branch_winners = bracket_winners.getBranchWinners(i);
		let arr = branch_winners.getFullBranch();
		for (let j = 0; j < arr.length; j++) {
			if (arr[j] == "") {
				compressed.push("xxx");
			}
			else {
				compressed.push(padInt(inverseMap.get(arr[j])));
			}
		}
	}

	return compressed.join(",");
}

// comp is a string of compressed winners
function createMtgBracketWinners(comp) {

}